<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>TweenTime: Basic example</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'> -->
  <style>
    body {
      background: #efefef;
    }

    .box {
      position: relative;
      width: 100px;
      height: 100px;
      margin-left: 50px;
      margin-top: 50px;
      background: #33b5e5;
    }
  </style>
</head>

<body>
  <div class="content-wrapper">
    <div class="box"></div>
  </div>
  <div id="timeline-container"></div>

  <!-- TweenTime & Editor -->
  <script src="../dist/scripts/TweenTime.main.js"></script>

  <!-- Example script -->
  <script>
    var data = [
      {
        "id": "box",
        "type": "box",
        "label": "Box 1",
        "properties": [
          {
            "name": "x",
            "keys": [
              {
                "time": 0,
                "val": 0
              },
              {
                "time": 2,
                "val": 100,
                "ease": "Quart.easeInOut"
              }
            ],
            "val": 42
          },
          {
            "name": "y",
            "keys": [
              {
                "time": 0,
                "val": 0,
                "ease": "Quad.easeOut"
              },
              {
                "time": 0.9870000000000003,
                "val": 50,
                "ease": "Cubic.easeInOut"
              },
              {
                "time": 2.006,
                "val": 0,
                "ease": "Quad.easeInOut"
              }
            ],
            "val": 0
          },
          {
            "name": "opacity",
            "keys": [
              {
                "time": 1.214,
                "val": 1
              },
              {
                "time": 3.98,
                "val": 0,
                "ease": "Quad.easeOut"
              }
            ],
            "val": 1,
            "min": 0,
            "max": 1
          },
          {
            "name": "event",
            "type": "event",
            "keys": [
              {
                "time": 1.214,
                "val": "event type key frame is fired!"
              }
            ]
          }
        ]
      }
    ];
    console.log(TweenTime);
    let $ = TweenTime.$;
    var tweenTime = new TweenTime.Core(data);
    var editor = new TweenTime.Editor(tweenTime, {
      el: $('#timeline-container')
    });

    tweenTime.addUpdateListener(function () {
      console.log('data was updated');
    });

    var box_values = tweenTime.getValues('box');

    tweenTime.addOnEventListener((name, val) => {
      console.log('onEvent callback', name, val);
    });
    tweenTime.timer.preStatusChanged.add(() => {
      console.log('pre status changed');
    });

    function animate() {
      $('.box').css({
        'opacity': box_values.opacity,
        'transform': 'translate(' + box_values.x + 'px, ' + box_values.y + 'px)'
      });
      // console.log(tweenTime.getCurrentTime());
      // console.log(tweenTime.getData());
      window.requestAnimationFrame(animate);
    }

    animate();
  </script>
</body>

</html>